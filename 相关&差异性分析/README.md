# 相关与误差性分析

### 背景资料
【【数模国赛急救速成】数据相关性及差异性分析，数学建模国赛C题数据题必学！！！】 https://www.bilibili.com/video/BV1ZW42197aL/?share_source=copy_web&vd_source=932d82bb04f7d4a0709bd6497949ae03

## 变量种类
### 1. 连续变量 (Continuous Variable)
**定义**：连续变量是可以取任意值的变量，通常是通过测量获得的，具有无限的精度。它们可以在某个范围内取任何值，包括小数和分数。

**举例**：
- **身高**（以厘米或英寸为单位）：例如，170.2 cm, 175.5 cm。
- **体重**（以公斤或磅为单位）：例如，65.3 kg, 70.0 kg。
- **温度**（以摄氏度或华氏度为单位）：例如，36.6°C, 98.6°F。
- **收入**（以美元为单位）：例如，45000.75美元，98000美元。

---

### 2. 二分类变量 (Binary Variable)
**定义**：二分类变量只有两个可能的类别，通常用于表示两种互斥的状态或属性。

**举例**：
- **性别**（男或女）：例如，男（1），女（0）。
- **是否吸烟**（是或否）：例如，是（1），否（0）。
- **是否通过考试**（通过或不通过）：例如，通过（1），不通过（0）。
- **客户满意度**（满意或不满意）：例如，满意（1），不满意（0）。

---

### 3. 有序分类变量 (Ordinal Variable)
**定义**：有序分类变量有两个或多个有顺序的类别，这些类别之间可以进行排序，但类别之间的差距可能不相等。

**举例**：
- **教育水平**（高中、大学、研究生）：例如，高中（1），大学（2），研究生（3）。
- **疼痛程度**（无痛、轻微疼痛、中等疼痛、剧烈疼痛）：例如，无痛（0），轻微疼痛（1），中等疼痛（2），剧烈疼痛（3）。
- **服务满意度**（非常不满意、不满意、一般、满意、非常满意）：例如，非常不满意（1），不满意（2），一般（3），满意（4），非常满意（5）。
- **工作绩效等级**（优秀、良好、一般、差）：例如，优秀（4），良好（3），一般（2），差（1）。

---

### 4. 无序分类变量 (Nominal Variable)
**定义**：无序分类变量具有三个或更多类别，这些类别之间没有内在顺序，也不能进行排序。

**举例**：
- **血型**（A型、B型、AB型、O型）：例如，A型（1），B型（2），AB型（3），O型（4）。
- **城市**（北京、上海、广州）：例如，北京（1），上海（2），广州（3）。
- **水果种类**（苹果、香蕉、橙子）：例如，苹果（1），香蕉（2），橙子（3）。
- **汽车品牌**（丰田、本田、福特）：例如，丰田（1），本田（2），福特（3）。

---

### 5. 自变量 (Independent Variable)
**定义**：自变量是预测变量或解释变量，是研究中用来预测或解释因变量变化的变量。它是研究中被操纵或选定的变量。

**举例**：
- **学习时间**（自变量）与**考试成绩**（因变量）：研究学习时间如何影响考试成绩。
- **广告支出**（自变量）与**销售额**（因变量）：研究广告支出如何影响销售额。
- **锻炼频率**（自变量）与**体重减轻**（因变量）：研究锻炼频率如何影响体重减轻。
- **肥料用量**（自变量）与**植物生长速度**（因变量）：研究肥料用量如何影响植物生长速度。

---

### 6. 因变量 (Dependent Variable)
**定义**：因变量是应答变量或结果变量，是研究中被预测或解释的变量。它是研究中受到自变量影响的变量。

**举例**：
- **考试成绩**（因变量）受**学习时间**（自变量）影响。
- **销售额**（因变量）受**广告支出**（自变量）影响。
- **体重减轻**（因变量）受**锻炼频率**（自变量）影响。
- **植物生长速度**（因变量）受**肥料用量**（自变量）影响。

## 相关性分析
### 目的
衡量俩个随机变量之间的相关性，衡量俩个变量之间的相关程度。

### 选择方法

1. **皮尔森相关**:
   - 自变量：连续变量
   - 因变量：连续变量
2. **斯皮尔曼相关**:
   - 自变量：有序分类变量【非定距】
   - 因变量：有序分类变量【非定距】

### 使用背景

1. 只想分析俩个量之间的关系不区分因变量自变量, 题目中缺乏目标导向。
2. 回归分析之前要进行相关性分析。

### 使用过程

1. 绘制散点图判断
2. 计算显著性常数， 判断是否相关，见代码 显著性分析.py
3. 计算相关性系数， 判断相关性大不大， 见代码 相关性分析.py 同时满足正态分布采用皮尔逊系数， 不满足正态分布采用斯佩尔曼系数。
4. 如果有多个变量， 那么就可以俩俩获取他们的相关性随后画出热力图。

## 差异性分析
### 目的
比较不同组别之间的差异

### 选择方法

1. **T检验**:
   - 自变量：二分类数据
   - 因变量：定量数据
2. **方差分析**:
   - 自变量：多分类数据
   - 因变量：定量数据
3. **卡方分析**:
   - 自变量：分类变量
   - 因变量：分类变量

| 方法   | 适用场景                   | 组别       | 示例                           |
|--------|----------------------------|------------|--------------------------------|
| T校验  | 研究分类数据和定量数据之间的关系 | 两组样本   | 性别对于满意度的差异情况        |
| 方差分析| 研究分类数据和定量数据之间的关系 | 两组或更多组| 不同学历样本对工作满意度的差异情况 |
| 卡方分析| 研究分类数据和分类数据之间的关系 |            | 性别和是否戴隐形眼镜之间的关联；性别和是否购买理财产品的关系；     |

#### T校验 
可以用于比较两组数据是否来自同一分布（可以用于比较两组数据的区分度）
主要用途：样本均数与总体均数的差异；两样本均数的差异比较
| 分类 | 适用场景 | 目的 | 示例 |
| --- | --- | --- | --- |
| 单样本T检验 | 正态分布；总体方差未知 | 检验单样本的均值与某一已知数（已知总体的均值）是否有显著差异 | 从某厂生产的零件中随机抽取若干件，检验其某种规格的均值是否与要求的规格相等 |
| 配对样本T校验 | 总体方差相等；正态分布 | 检验在两次不同条件下来自同一组观察对象的两组样本是否具有相同的均值 | 同一受试对象的自身前后对照（如检验癌症患者术前、术后的某种指标的差异） |
| 独立双样本T校验 | 两样本独立，服从正态分布或近似正态。 | 检验两对独立的正态数据或近似正态的样本的均值是否相等 | 检验两工厂生产同种零件的规格是否相等 |

以下是每种T检验方法的具体例子，包括T值和P值的解释：

### 1. 单样本T检验
**场景**：某公司生产的电池标称寿命为500小时，质量检验员抽取了一组10个电池样本，测得它们的平均寿命为510小时，样本标准差为15小时。我们想检验这些电池的实际寿命是否与标称寿命显著不同。

假设我们设定显著性水平为0.05，查找T分布表（自由度为\(n-1=9\)），我们发现P值约为0.06（假设单尾检验）。因为P值大于0.05，我们不能拒绝零假设，说明样本寿命与标称寿命之间的差异在统计学上不显著。

---

### 2. 配对样本T检验
**场景**：一个研究员测试了某种新药对10名患者的效果。药物服用前，患者的血压测量值为120 mmHg，药物服用后，患者的血压测量值为115 mmHg。我们想检验药物是否显著降低了血压。

假设我们设定显著性水平为0.05，查找T分布表（自由度为\(n-1=9\)），我们发现P值约为0.009（假设单尾检验）。由于P值小于0.05，我们可以拒绝零假设，说明药物显著降低了血压。

---

### 3. 独立样本T检验
**场景**：我们想比较男性和女性在某心理测试中的平均得分。随机抽取了15名男性和15名女性，男性的平均得分为75分，标准差为10分；女性的平均得分为70分，标准差为12分。我们想检验男性和女性的平均得分是否有显著差异。

假设我们设定显著性水平为0.05，查找T分布表（自由度为近似值，即15 + 15 - 2 = 28），我们发现P值约为0.11（假设双尾检验）。因为P值大于0.05，我们不能拒绝零假设，说明男性和女性的平均得分差异在统计学上不显著。

---
## 方差分析
| 分类 | 适用场景 | 目的 | 示例 |
| :--: | :--: | :--: | :--: |
| 单因素方差分析 one-way ANOVA | 所有样本均来自正态总体；这些正态总体具有相同的方差。 | 研究一个控制变量的不同水平是否对观测变量产生了显著影响。 | 检验不同时间记录（早晨、下午和晚上）的静息状态下的静息脑电信号平均功率的平均值是否相同。 |
| 配对样本T校验 two-way ANOVA | 所有样本均来自正态总体；这些正态总体具有相同的方差。 | 研究两个因素（行因素row和列因素column）是否对观测变量产生了显著影响。 | 分析氮磷两种肥料的施用量对水稻产量是否有显著性影响 |
| 独立双样本T校验 multi-way ANOVA | 所有样本均来自正态总体；这些正态总体具有相同的方差。 | 研究两个因素（行因素row和列因素column）是否对观测变量产生了显著影响。 |  |

## 卡方分析

卡方分析用于检验分类数据中实际观察到的频数与理论预期频数之间是否存在显著差异。它通过计算卡方统计量来评估这种差异。

### 卡方适合度检验（Goodness-of-Fit Test）

- **目的**：检验一个分类变量的观测频数是否符合预期的频数分布。
- **应用场景**：检验掷骰子的结果是否符合均匀分布，或某个样本的性别比例是否符合总体的性别比例。

### 卡方独立性检验（Test of Independence）

- **目的**：检验两个分类变量是否相互独立，即它们之间是否存在关联。
- **应用场景**：检验性别与是否吸烟之间是否存在关联，或教育水平与收入水平之间是否存在关联。


### 重要的值
方差分析中有 T统计值反映了样本数据的观察值与期望值之间的差异，而P值则反映了这种差异是否可能是随机因素造成的。P值越小，T统计值的差异就越可能是真实的，而不是偶然的。


### P值
在显著性分析中，P值（P-value）是一个核心概念，用于评估观察到的数据结果与零假设（null hypothesis）之间的关系。它帮助我们判断观察到的结果是否足够显著，以拒绝零假设。以下是对P值的统一介绍：

**P值** 是在零假设为真的情况下，观察到当前或更极端的统计结果的概率。零假设通常表示没有效应或没有差异，而P值则用来衡量我们观察到的结果有多不可能在零假设成立的情况下发生。

1. **P值小于显著性水平（α）**：
   - **常用显著性水平**：0.05、0.01、0.10
   - **解释**：如果P值小于预设的显著性水平（如0.05），我们拒绝零假设，认为结果具有统计学意义。即观察到的差异或效应被认为是显著的，而不是由于随机变异造成的。

2. **P值大于显著性水平（α）**：
   - **解释**：如果P值大于显著性水平（如0.05），我们没有足够的证据拒绝零假设。这并不意味着零假设是真的，而只是说我们没有足够的证据来证明观察到的效果或差异。

假设你在进行一项药物实验，想比较药物A和安慰剂对某种疾病的效果。你计算得到药物A的P值为0.03。以下是如何解释这一P值：

- 如果显著性水平（α）设定为0.05，那么P值为0.03小于0.05，你可以拒绝零假设，认为药物A对疾病的治疗效果显著优于安慰剂。
- 如果P值大于0.05，则你没有足够的证据拒绝零假设，可能药物A的效果与安慰剂没有显著差异。